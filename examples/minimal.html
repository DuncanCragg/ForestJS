<html>
  <head>
    <meta charset="UTF-8" />
    <title>Forest Minimal Example</title>
  </head>
  <body>
    <div id="root"></div>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.5.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.5.0/react-dom.js"></script>
    <script src="../lib/forest-core.js"></script>
    <script src="../lib/forest.js"></script>
    <script type="text/babel">

// ------------------------------------

function renderMin(state, userState){
  return (
    <div>
      <hr/>
      {state('enableCounting')? 'Count!': 'Hold on...'}
      <br/><br/>
      <span>Count: {state('counter')}</span>&nbsp;&nbsp;&nbsp;
      {userState.button('inc', {label: 'increment'})}
      <br/><br/>
      {userState.textField('message')}
      <br/><br/>
      {userState.checkbox('allowuppercase', {label: 'Allow upper case'})}
      <br/><br/><hr/><br/>
    </div>);
}

const renderers = {
  'minimal': renderMin
};

// ------------------------------------

forest.storeObjects(
  [{ evaluate: evalMin,
     is: 'minimal',
     enableCounting: true,
     counter: 17,
     message: 'Hello World!',
     allowuppercase: true
  }],
  renderers
);

function evalMin(state){
  const incrementPushed  = !state('inc') && state('userState.inc');
  return Object.assign({},
    state('Timer') === 0    && { Timer: 2000, enableCounting: !state('enableCounting') },
    incrementPushed         && { counter: state('counter') + 1 },
   !state('enableCounting') && { counter: 0 },
    true                    && { inc: state('userState.inc') },
    true                    && { message: state('allowuppercase')? state('userState.message'): state('userState.message').toLowerCase() },
    true                    && { allowuppercase: state('userState.allowuppercase') }
  );
}

// ------------------------------------

    </script>
  </body>
</html>
